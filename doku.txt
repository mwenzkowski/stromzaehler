1. Benötigte Pakete installieren
================================

libcurl
-------
	sudo apt install libcurl4-openssl-dev

Benötigt zum kompilieren des eigenen Programms.

InfluxDB
---------

	sudo apt-get install influxdb influxdb-client

Grafana
-------

Abhängigkeiten von Grafana installieren:

	sudo apt install adduser libfontconfig1

Grafana herunterladen und installieren:

	wget https://dl.grafana.com/oss/release/grafana-rpi_6.4.2_armhf.deb
	sudo dpkg -i grafana-rpi_6.4.2_armhf.deb

	(Dieses Paket ist für den Raspberry Pi 1. Für andere Raspberry Pi's
	können auf https://grafana.com/grafana/download?platform=arm gefunden
	werden.)

Grafana aktivieren und starten:

	sudo systemctl daemon-reload
	sudo systemctl enable --now grafana-server

Datenbank erstellen
===================

	influx -execute 'CREATE DATABASE stromzaehler'



Tagesverbräuche mit influxdb erstellen
======================================

Die alten Werte in Tagesverbräuche umrechnen und in die Tabelle 'tageszaehler'
einfügen:

SELECT difference(last("count"))
INTO tageszaehler
FROM stromzaehler
WHERE time >= '2019-10-18' AND time < '2019-10-29'
GROUP BY time(1d) tz('Europe/Berlin')

Eine 'Continuous Query' erstellen um nach jedem Tag den Tagesverbrauch zu
berechnen und in die Tabelle einzufügen:

CREATE CONTINUOUS QUERY cq_tageszaehler ON stromzaehler
	BEGIN select difference(last("count"))
	INTO tageszaehler
	FROM stromzaehler
	GROUP BY time(1d) tz('Europe/Berlin')
END
